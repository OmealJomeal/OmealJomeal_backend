<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.config.MemberMapper">

    <!-- 로그인 -->
    <select id="selectMember" parameterType="hashmap" resultType="MemberDTO">
	<![CDATA[
        SELECT * FROM user
		WHERE user_email = #{email} AND user_password = #{password}
        ]]>
	</select>

    <!-- 일반회원가입 -->
    <insert id="generalSignUp" parameterType="MemberDTO">
   	<![CDATA[
        INSERT	INTO user (user_password,user_name,user_email, user_phone, user_address, user_gender, user_lifestyle, user_interest, user_food_favor, user_access_time)
        VALUES (#{password},#{name},#{email},#{phone},#{address},#{gender},#{lifestyle},#{interest},#{foodFavor},CURRENT_TIMESTAMP)
        ]]>
	</insert>

	<!-- 접속일시 업데이트 -->
	<update id="updateDatetime" parameterType="hashmap">
		UPDATE user
		SET user_access_time = CURRENT_TIMESTAMP
		WHERE user_email = #{email} AND user_password = #{password}
	</update>

</mapper>